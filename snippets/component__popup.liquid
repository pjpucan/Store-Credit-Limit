<!-- snippets/component__popup.liquid -->
{% comment %} 
  Simple centered popup overlay. 

  Accepts:
  - popup_id: {string} Unique Id for the popup
  - content: {Object} Liquid object for content
  
  Globals:
  - color_background_overlay: {string} Background color of the overlay
  - enable_animations: {boolean} Enable or disable animations

  Usage:
    {% render 'component__popup', 
      popup_id: 'popup',
      content: popup_content 
    %}
  
  Recommendations:
  - Use this to display content in a popup.
{% endcomment %}

<section
  class="fixed inset-0 z-50 overflow-hidden"
  role="dialog" 
  aria-modal="true"
  @keyup.escape.window="{{ popup_id }} = false;"
  x-show="{{ popup_id }}"
  x-cloak>
  <div 
    class="flex items-end justify-center min-h-screen px-4 pt-4 text-center sm:block sm:p-0"> 
    
    {% comment %} Overlay {% endcomment %}
    <div 
      class="fixed inset-0 transition-opacity" 
      style="background: {{ settings.color_background_overlay }};"
      aria-hidden="true"
      @click="{{ popup_id }} = false;"
      x-show="{{ popup_id }}"
      {% if settings.enable_animations %}
        x-transition:enter="animation-300"
        x-transition:enter-start="opacity-0"
        x-transition:enter-end="opacity-100"
        x-transition:leave="animation-300"
        x-transition:leave-start="opacity-100"
        x-transition:leave-end="opacity-0"
      {% endif %}
      x-cloak>
    </div>

    {% comment %} Frame {% endcomment %}
    <div 
      class="absolute bottom-0 left-0 right-0 inline-block m-auto text-left align-bottom transition-all transform md:left-5 md:bottom-auto md:right-5 md:top-1/2 md:align-middle md:max-w-md md:-translate-y-1/2"
      x-show="{{ popup_id }}"
      x-trap="{{ popup_id }}"
      {% if settings.enable_animations %}
        x-transition:enter="animation-300"
        x-transition:enter-start="opacity-0 translate-y-8"
        x-transition:enter-end="opacity-100"
        x-transition:leave="animation-300"
        x-transition:leave-start="opacity-100"
        x-transition:leave-end="opacity-0 translate-y-8"
      {% endif %}
      x-cloak>

      {% comment %} Close {% endcomment %}
      <div 
        class="px-4 py-4 md:px-0">
        <button 
          class="btn btn--smaller btn--minimal-alt" 
          type="button"
          title="{{ 'actions.close' | t }}"
          @click="{{ popup_id }} = false;">
          {% render 'component__icon', icon: 'x', size: '24', class: '' %}
        </button>
      </div>

      {% comment %} Content {% endcomment %}
      <div 
        class="mobile-border--b0-radius color__bg-body border--radius overflow-y-auto shadow-md max-h-[70vh]"
        @click.outside="{{ popup_id }} = false;">
        {{ content }}
      </div>
      
    </div>

  </div>
</section>