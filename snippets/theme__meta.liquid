<!-- snippets/theme__meta.liquid -->
{% comment %} 
  This file is responsible for generating the meta tags for the entire site, including social sharing and open graph tags. 

  Globals:
  - favicon {object}: Set the favicon image.
  - color_background_body {string}: Background color used for windows icons.
  - color_bar {string}: Set the mobile bar color on light mode. This is the bar that displays battery levels.
  - mobile_bar_dark {string}: Set the mobile bar color on dark mode. This is the bar that displays battery levels.
  - type_seperator {string}: Setting to pick the type of separator between text.
  - social_twitter_link {string}: Set the social profile when sharing content (e.g. <meta name="twitter:site"...).

  Usage:
    {% render 'theme__meta' %}

  Recommendations:
  - Ensure that the settings for favicon, colors, type separator, and social link are preset in Shopify admin before using this file.
{% endcomment %}

{% comment %} Set values {% endcomment %}
{% liquid
  assign meta_type = 'website' 
  assign meta_title = page_title | strip_html | escape 
  assign meta_description = page_description | strip_html | escape 
  if template contains 'product' 
    assign meta_type = 'product' 
    assign meta_title = product.title | strip_html | escape 
    assign meta_price = product.price | money_without_currency | strip_html | escape 
    assign meta_currency = shop.currency 
  elsif template contains 'collection' 
    if page_description
       assign meta_description = page_description | strip_html | escape
    elsif collection.description != blank 
      assign meta_description = collection.description | strip_html | escape 
    endif 
  elsif template contains 'article' 
    assign meta_type = 'article' 
  endif 
  capture seo_title
    echo page_title | strip_html
  endcapture
%}

{% comment %} Basics {% endcomment %}
<title>{{ seo_title }} {% if settings.type_seperator == 'dot' %}Â·{% else %}|{% endif %} {{ shop.name }}</title>
<link href='{{ canonical_url }}' rel='canonical'>
<meta charset='utf-8'>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5">

{% comment %} Favicon {% endcomment %}
{% if settings.favicon %}
  <link href="{{ settings.favicon | image_url: width: 180, height: 180 }}" rel="apple-touch-icon" sizes="180x180">
  <link href="{{ settings.favicon | image_url: width: 32, height: 32 }}" rel="icon" type="image/png" sizes="32x32">
{% endif %}
<meta name="msapplication-TileColor" content="{{ settings.color_background_body }}">
<meta name="theme-color" content="{{ settings.mobile_bar_light }}">
<meta name="description" content="{{ meta_description | default: shop.name }}" />

{% comment %} Open graph tags {% endcomment %}
<meta property="og:url" content="{{ canonical_url }}">
<meta property="og:site_name" content="{{ shop.name }}">
<meta property="og:type" content="{{ meta_type | default: 'website' }}">
<meta property="og:title" content="{{ meta_title | default: shop.name }}">
<meta property="og:description" content="{{ meta_description | default: shop.name }}">
{% if page_image %}
  <meta property="og:image" content="http:{{ page_image | image_url: width: 900 }}">
  <meta property="og:image:secure_url" content="https:{{ page_image | image_url: width: 900 }}">
  <meta property="og:image:width" content="{{ page_image.width }}">
  <meta property="og:image:height" content="{{ page_image.height }}">
{% endif %}
{% if meta_price %}
  <meta property="og:price:amount" content="{{ meta_price }}">
  <meta property="og:price:currency" content="{{ meta_currency }}">
{% endif %}

{% comment %} Twitter tags {% endcomment %}
<meta name="twitter:title" content="{{ meta_title | default: shop.name }}">
<meta name="twitter:site" content="{{ settings.social_twitter_link | remove: "https://twitter.com/" }}" />
<meta name="twitter:description" content="{{ meta_description | default: shop.name }}">
<meta name="twitter:card" content="summary_large_image">
{% if page_image %}
  <meta name="twitter:image" content="https:{{ page_image | image_url: width: 900 }}">
{% endif %}